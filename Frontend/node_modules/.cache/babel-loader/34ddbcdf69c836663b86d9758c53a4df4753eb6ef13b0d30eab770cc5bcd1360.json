{"ast":null,"code":"var _jsxFileName = \"E:\\\\Descargas\\\\Nueva carpeta\\\\Proyecto Desarrollo 1 - copia\\\\Frontend\\\\src\\\\formularios\\\\RegistroDiscapacitados.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport BotonesModoOscuroVolver from '../components/BotonesModoOscuroVolver';\nimport { verificarCorreo } from '../utils/verificarCorreo';\nimport '../styles/light.css';\nimport '../styles/dark.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction FormularioDiscapacitados() {\n  _s();\n  const [formData, setFormData] = useState({\n    nombre: '',\n    apellido: '',\n    correo: '',\n    password: '',\n    confirmPassword: '',\n    discapacidad: '',\n    descripcion: ''\n  });\n  const [modoOscuro, setModoOscuro] = useState(false);\n  const [correoExistente, setCorreoExistente] = useState(false);\n  const [validandoCorreo, setValidandoCorreo] = useState(false);\n  const [pasoActual, setPasoActual] = useState(0);\n  const [reconocimientoActivo, setReconocimientoActivo] = useState(false);\n  const [mensajeEnviado, setMensajeEnviado] = useState(false);\n  const [cargando, setCargando] = useState(false);\n  const recognitionRef = useRef(null);\n  const navigate = useNavigate();\n  const pasoActualRef = useRef(pasoActual);\n  const nombreRef = useRef(null);\n  const apellidoRef = useRef(null);\n  const correoRef = useRef(null);\n  const passwordRef = useRef(null);\n  const confirmPasswordRef = useRef(null);\n  const discapacidadRef = useRef(null);\n  const descripcionRef = useRef(null);\n  const pasos = ['nombre', 'apellido', 'correo', 'password', 'discapacidad', 'descripcion', 'registrar'];\n  const instrucciones = {\n    nombre: 'Este es el formulario de registro para discapacitados visuales. Por favor, di tu nombre.',\n    apellido: 'Ahora por favor, di tu apellido.',\n    correo: 'Ahora indica tu correo electrónico. Di arroba para separar tu nombre de usuario de la dirección de tu servidor.',\n    password: 'Ahora indica tu contraseña. Debe tener al menos 6 caracteres.',\n    discapacidad: 'Por favor, selecciona el tipo de discapacidad visual diciendo un número del uno al cinco. Las opciones son: uno, ceguera total; dos, baja visión; tres, visión borrosa; cuatro, fotofobia; cinco, otra.',\n    descripcion: '¿Deseas agregar una descripción adicional? Di \"no\" si no es necesario.',\n    registrar: 'Registrando tu información.'\n  };\n  const referencias = {\n    nombre: nombreRef,\n    apellido: apellidoRef,\n    correo: correoRef,\n    password: passwordRef,\n    discapacidad: discapacidadRef,\n    descripcion: descripcionRef\n  };\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useEffect(() => {\n    document.body.classList.toggle('dark', modoOscuro);\n    if ('webkitSpeechRecognition' in window) {\n      const recognition = new window.webkitSpeechRecognition();\n      recognition.lang = 'es-ES';\n      recognition.continuous = false;\n      recognition.interimResults = false;\n      recognition.onresult = event => {\n        var _event$results, _event$results$, _event$results$$;\n        const resultado = (_event$results = event.results) === null || _event$results === void 0 ? void 0 : (_event$results$ = _event$results[0]) === null || _event$results$ === void 0 ? void 0 : (_event$results$$ = _event$results$[0]) === null || _event$results$$ === void 0 ? void 0 : _event$results$$.transcript.trim().toLowerCase();\n        if (resultado) manejarResultado(resultado);\n      };\n      recognition.onerror = event => {\n        hablar('Hubo un error con el micrófono. Por favor intenta nuevamente.');\n        console.error('Reconocimiento error:', event.error);\n      };\n      recognitionRef.current = recognition;\n    }\n    setReconocimientoActivo(true);\n    iniciarPaso(0);\n    // eslint-disable-next-line\n  }, [modoOscuro]);\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      if (formData.correo) {\n        verificarCorreo(formData.correo, setCorreoExistente, setValidandoCorreo);\n      }\n    }, 500);\n    return () => clearTimeout(timer);\n  }, [formData.correo]);\n  const hablar = (texto, callback = null, autoReconocer = true) => {\n    var _recognitionRef$curre;\n    setReconocimientoActivo(false);\n    (_recognitionRef$curre = recognitionRef.current) === null || _recognitionRef$curre === void 0 ? void 0 : _recognitionRef$curre.abort();\n    const msg = new SpeechSynthesisUtterance(texto);\n    msg.lang = 'es-ES';\n    msg.onend = () => {\n      if (callback) callback();\n      if (autoReconocer) {\n        setTimeout(() => iniciarReconocimiento(), 400);\n      }\n    };\n    window.speechSynthesis.cancel();\n    window.speechSynthesis.speak(msg);\n  };\n  const iniciarPaso = index => {\n    setPasoActual(index);\n    const paso = pasos[index];\n    const ref = referencias[paso];\n    if (ref !== null && ref !== void 0 && ref.current) ref.current.focus();\n    setTimeout(() => {\n      hablar(instrucciones[paso]);\n    }, 400);\n  };\n  const avanzarPaso = () => {\n    setPasoActual(prevPaso => {\n      const siguiente = Math.min(prevPaso + 1, pasos.length - 1);\n      setTimeout(() => iniciarPaso(siguiente), 200);\n      return siguiente;\n    });\n  };\n  const iniciarReconocimiento = () => {\n    if (!recognitionRef.current) return;\n    try {\n      recognitionRef.current.abort();\n      recognitionRef.current.start();\n    } catch (error) {\n      console.error('Error iniciando reconocimiento:', error);\n      hablar('Hubo un error iniciando el micrófono.');\n    }\n  };\n  useEffect(() => {\n    pasoActualRef.current = pasoActual;\n  }, [pasoActual]);\n  const formatearNombre = texto => {\n    return texto.normalize('NFD') // Elimina acentos\n    .replace(/[\\u0300-\\u036f]/g, '').toLowerCase().replace(/(^\\w{1})|(\\s+\\w{1})/g, letra => letra.toUpperCase()); // Capitaliza\n  };\n  const manejarResultado = resultado => {\n    const paso = pasos[pasoActualRef.current];\n    let entrada = resultado.replace(/[^\\w\\sáéíóúüñ]/gi, '') // elimina signos raros\n    .normalize('NFD').replace(/[\\u0300-\\u036f]/g, '') // quita acentos\n    .toLowerCase().trim(); // limpia espacios y deja todo en minúsculas\n    switch (paso) {\n      case 'nombre':\n      case 'apellido':\n        {\n          const nombreFormateado = formatearNombre(resultado);\n          setFormData(prev => ({\n            ...prev,\n            [paso]: nombreFormateado\n          }));\n          avanzarPaso();\n          break;\n        }\n      case 'correo':\n        const correo = resultado.replace(' arroba ', '@').replace(/\\s/g, '');\n        setFormData(prev => ({\n          ...prev,\n          correo\n        }));\n        avanzarPaso();\n        break;\n      case 'password':\n        setFormData(prev => ({\n          ...prev,\n          password: resultado,\n          confirmPassword: resultado\n        }));\n        avanzarPaso();\n        break;\n      case 'discapacidad':\n        {\n          const opcionesPorNumero = {\n            '1': 'cegueraTotal',\n            'uno': 'cegueraTotal',\n            'una': 'cegueraTotal',\n            // por si interpreta así\n            'primero': 'cegueraTotal',\n            '2': 'bajaVision',\n            'dos': 'bajaVision',\n            'segundo': 'bajaVision',\n            '3': 'visionBorrosa',\n            'tres': 'visionBorrosa',\n            'tercero': 'visionBorrosa',\n            '3ro': 'visionBorrosa',\n            '4': 'fotofobia',\n            'cuatro': 'fotofobia',\n            'cuarto': 'fotofobia',\n            '5': 'otra',\n            'cinco': 'otra',\n            'quinto': 'otra'\n          };\n          const discapacidad = opcionesPorNumero[entrada];\n          if (discapacidad) {\n            setFormData(prev => ({\n              ...prev,\n              discapacidad\n            }));\n            avanzarPaso();\n          } else {\n            hablar('Opción no válida. Di un número del uno al cinco. Uno, ceguera total; dos, baja visión; tres, visión borrosa; cuatro, fotofobia; cinco, otra.');\n          }\n          break;\n        }\n      case 'descripcion':\n        if (['no', 'nada', 'ninguna'].includes(resultado)) {\n          avanzarPaso();\n        } else {\n          setFormData(prev => ({\n            ...prev,\n            descripcion: resultado\n          }));\n          avanzarPaso();\n        }\n        break;\n      default:\n        break;\n    }\n  };\n  const manejarEnvioFormulario = async () => {\n    if (correoExistente) return hablar('Este correo ya está registrado.', () => iniciarPaso(2));\n    if (formData.password.length < 6) return hablar('La contraseña debe tener al menos 6 caracteres.', () => iniciarPaso(3));\n    if (formData.password !== formData.confirmPassword) return hablar('Las contraseñas no coinciden.', () => iniciarPaso(3));\n    if (!formData.discapacidad) return hablar('Debes seleccionar un tipo de discapacidad.', () => iniciarPaso(4));\n    try {\n      setCargando(true);\n      const res = await fetch('http://localhost:4000/api/RegistroDiscapacitados', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(formData)\n      });\n      if (res.ok) {\n        setMensajeEnviado(true);\n        hablar('¡Registro exitoso! Serás redirigido al inicio de sesión.', () => navigate('/login'), false);\n      } else {\n        const err = await res.json();\n        hablar(`Error al registrar: ${err.message || 'Intenta más tarde'}`);\n      }\n    } catch (err) {\n      console.error(err);\n      hablar('Ocurrió un error al conectar con el servidor. Intenta más tarde.');\n    } finally {\n      setCargando(false);\n    }\n  };\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(BotonesModoOscuroVolver, {\n      modoOscuro: modoOscuro,\n      setModoOscuro: setModoOscuro\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"contenedor-microfono\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        \"aria-label\": \"Activar micr\\xF3fono para dictar informaci\\xF3n\",\n        \"aria-describedby\": \"instruccion-mic\",\n        onClick: iniciarReconocimiento,\n        disabled: cargando,\n        className: `boton-microfono ${reconocimientoActivo ? 'activo' : ''}`,\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: reconocimientoActivo ? \"https://cdn-icons-png.flaticon.com/512/4712/4712035.png\" : \"https://cdn-icons-png.flaticon.com/512/4712/4712109.png\",\n          alt: reconocimientoActivo ? \"Micrófono activo\" : \"Micrófono inactivo\",\n          className: \"icono-microfono\",\n          \"aria-hidden\": \"true\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        id: \"instruccion-mic\",\n        hidden: true,\n        children: \"Presiona este bot\\xF3n para activar el micr\\xF3fono. Luego, sigue las instrucciones habladas.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 9\n      }, this), cargando && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cargando-voz\",\n        children: \"Procesando...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 22\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"registro-container\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: e => e.preventDefault(),\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Formulario de Registro\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"nombre\",\n          children: \"Nombre\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          ref: nombreRef,\n          type: \"text\",\n          id: \"nombre\",\n          name: \"nombre\",\n          value: formData.nombre,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"apellido\",\n          children: \"Apellido\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          ref: apellidoRef,\n          type: \"text\",\n          id: \"apellido\",\n          name: \"apellido\",\n          value: formData.apellido,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"correo\",\n          children: [\"Correo electr\\xF3nico:\", correoExistente && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"correo-registrado\",\n            children: \" * Este correo ya est\\xE1 registrado\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 33\n          }, this), validandoCorreo && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"validando-correo\",\n            children: \" (Validando...)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          ref: correoRef,\n          type: \"email\",\n          id: \"correo\",\n          name: \"correo\",\n          value: formData.correo,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"password\",\n          children: \"Contrase\\xF1a (m\\xEDnimo 6 caracteres)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 303,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          ref: passwordRef,\n          type: \"password\",\n          id: \"password\",\n          name: \"password\",\n          value: formData.password,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"confirmPassword\",\n          children: \"Confirmar contrase\\xF1a\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          ref: confirmPasswordRef,\n          type: \"password\",\n          id: \"confirmPassword\",\n          name: \"confirmPassword\",\n          value: formData.confirmPassword,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"discapacidad\",\n          children: \"Tipo de discapacidad\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          ref: discapacidadRef,\n          id: \"discapacidad\",\n          name: \"discapacidad\",\n          value: formData.discapacidad,\n          onChange: handleChange,\n          required: true,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Seleccione un tipo de discapacidad visual\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 311,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"cegueraTotal\",\n            children: \"Ceguera total\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 312,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"bajaVision\",\n            children: \"Baja visi\\xF3n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"visionBorrosa\",\n            children: \"Visi\\xF3n borrosa\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"fotofobia\",\n            children: \"Fotofobia\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"otra\",\n            children: \"Otra\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"descripcion\",\n          children: \"Descripci\\xF3n adicional (opcional)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          ref: descripcionRef,\n          id: \"descripcion\",\n          name: \"descripcion\",\n          value: formData.descripcion,\n          onChange: handleChange,\n          rows: \"4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"botones-envio\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn-enviar\",\n            onClick: manejarEnvioFormulario,\n            disabled: cargando,\n            children: cargando ? 'Procesando...' : 'Registrarse'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 323,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"texto-cuenta\",\n            children: [\"\\xBFYa tienes una cuenta?\", ' ', /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"btn-iniciar-sesion\",\n              onClick: () => navigate('/login'),\n              disabled: cargando,\n              children: \"Inicia sesi\\xF3n\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 328,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 326,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 11\n        }, this), mensajeEnviado && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mensaje-exito\",\n          children: \"\\xA1Registro exitoso!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 30\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(FormularioDiscapacitados, \"0dHCGxxPkul9EbnXvzSxiDUSSoY=\", false, function () {\n  return [useNavigate];\n});\n_c = FormularioDiscapacitados;\nexport default FormularioDiscapacitados;\nvar _c;\n$RefreshReg$(_c, \"FormularioDiscapacitados\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useNavigate","BotonesModoOscuroVolver","verificarCorreo","jsxDEV","_jsxDEV","Fragment","_Fragment","FormularioDiscapacitados","_s","formData","setFormData","nombre","apellido","correo","password","confirmPassword","discapacidad","descripcion","modoOscuro","setModoOscuro","correoExistente","setCorreoExistente","validandoCorreo","setValidandoCorreo","pasoActual","setPasoActual","reconocimientoActivo","setReconocimientoActivo","mensajeEnviado","setMensajeEnviado","cargando","setCargando","recognitionRef","navigate","pasoActualRef","nombreRef","apellidoRef","correoRef","passwordRef","confirmPasswordRef","discapacidadRef","descripcionRef","pasos","instrucciones","registrar","referencias","document","body","classList","toggle","window","recognition","webkitSpeechRecognition","lang","continuous","interimResults","onresult","event","_event$results","_event$results$","_event$results$$","resultado","results","transcript","trim","toLowerCase","manejarResultado","onerror","hablar","console","error","current","iniciarPaso","timer","setTimeout","clearTimeout","texto","callback","autoReconocer","_recognitionRef$curre","abort","msg","SpeechSynthesisUtterance","onend","iniciarReconocimiento","speechSynthesis","cancel","speak","index","paso","ref","focus","avanzarPaso","prevPaso","siguiente","Math","min","length","start","formatearNombre","normalize","replace","letra","toUpperCase","entrada","nombreFormateado","prev","opcionesPorNumero","includes","manejarEnvioFormulario","res","fetch","method","headers","JSON","stringify","ok","err","json","message","handleChange","e","name","value","target","children","fileName","_jsxFileName","lineNumber","columnNumber","className","onClick","disabled","src","alt","id","hidden","onSubmit","preventDefault","htmlFor","type","onChange","required","rows","_c","$RefreshReg$"],"sources":["E:/Descargas/Nueva carpeta/Proyecto Desarrollo 1 - copia/Frontend/src/formularios/RegistroDiscapacitados.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport BotonesModoOscuroVolver from '../components/BotonesModoOscuroVolver';\nimport { verificarCorreo } from '../utils/verificarCorreo';\nimport '../styles/light.css';\nimport '../styles/dark.css';\n\nfunction FormularioDiscapacitados() {\n  const [formData, setFormData] = useState({\n    nombre: '',\n    apellido: '',\n    correo: '',\n    password: '',\n    confirmPassword: '',\n    discapacidad: '',\n    descripcion: ''\n  });\n\n  const [modoOscuro, setModoOscuro] = useState(false);\n  const [correoExistente, setCorreoExistente] = useState(false);\n  const [validandoCorreo, setValidandoCorreo] = useState(false);\n  const [pasoActual, setPasoActual] = useState(0);\n  const [reconocimientoActivo, setReconocimientoActivo] = useState(false);\n  const [mensajeEnviado, setMensajeEnviado] = useState(false);\n  const [cargando, setCargando] = useState(false);\n  const recognitionRef = useRef(null);\n  const navigate = useNavigate();\n\n  const pasoActualRef = useRef(pasoActual);\n  const nombreRef = useRef(null);\n  const apellidoRef = useRef(null);\n  const correoRef = useRef(null);\n  const passwordRef = useRef(null);\n  const confirmPasswordRef = useRef(null);\n  const discapacidadRef = useRef(null);\n  const descripcionRef = useRef(null);\n\n  const pasos = ['nombre', 'apellido', 'correo', 'password', 'discapacidad', 'descripcion', 'registrar'];\n\n  const instrucciones = {\n    nombre: 'Este es el formulario de registro para discapacitados visuales. Por favor, di tu nombre.',\n    apellido: 'Ahora por favor, di tu apellido.',\n    correo: 'Ahora indica tu correo electrónico. Di arroba para separar tu nombre de usuario de la dirección de tu servidor.',\n    password: 'Ahora indica tu contraseña. Debe tener al menos 6 caracteres.',\n    discapacidad: 'Por favor, selecciona el tipo de discapacidad visual diciendo un número del uno al cinco. Las opciones son: uno, ceguera total; dos, baja visión; tres, visión borrosa; cuatro, fotofobia; cinco, otra.',\n    descripcion: '¿Deseas agregar una descripción adicional? Di \"no\" si no es necesario.',\n    registrar: 'Registrando tu información.'\n  };\n\n  const referencias = {\n    nombre: nombreRef,\n    apellido: apellidoRef,\n    correo: correoRef,\n    password: passwordRef,\n    discapacidad: discapacidadRef,\n    descripcion: descripcionRef\n  };\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useEffect(() => {\n    document.body.classList.toggle('dark', modoOscuro);\n\n    if ('webkitSpeechRecognition' in window) {\n      const recognition = new window.webkitSpeechRecognition();\n      recognition.lang = 'es-ES';\n      recognition.continuous = false;\n      recognition.interimResults = false;\n\n      recognition.onresult = (event) => {\n        const resultado = event.results?.[0]?.[0]?.transcript.trim().toLowerCase();\n        if (resultado) manejarResultado(resultado);\n      };\n\n      recognition.onerror = (event) => {\n        hablar('Hubo un error con el micrófono. Por favor intenta nuevamente.');\n        console.error('Reconocimiento error:', event.error);\n      };\n\n      recognitionRef.current = recognition;\n    }\n\n    setReconocimientoActivo(true);\n    iniciarPaso(0);\n    // eslint-disable-next-line\n  }, [modoOscuro]);\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      if (formData.correo) {\n        verificarCorreo(formData.correo, setCorreoExistente, setValidandoCorreo);\n      }\n    }, 500);\n    return () => clearTimeout(timer);\n  }, [formData.correo]);\n\n  const hablar = (texto, callback = null, autoReconocer = true) => {\n    setReconocimientoActivo(false);\n    recognitionRef.current?.abort();\n\n    const msg = new SpeechSynthesisUtterance(texto);\n    msg.lang = 'es-ES';\n    msg.onend = () => {\n      if (callback) callback();\n      if (autoReconocer) {\n        setTimeout(() => iniciarReconocimiento(), 400);\n      }\n    };\n\n    window.speechSynthesis.cancel();\n    window.speechSynthesis.speak(msg);\n  };\n\n  const iniciarPaso = (index) => {\n    setPasoActual(index);\n    const paso = pasos[index];\n    const ref = referencias[paso];\n    if (ref?.current) ref.current.focus();\n\n    setTimeout(() => {\n      hablar(instrucciones[paso]);\n    }, 400);\n  };\n\n  const avanzarPaso = () => {\n    setPasoActual(prevPaso => {\n      const siguiente = Math.min(prevPaso + 1, pasos.length - 1);\n      setTimeout(() => iniciarPaso(siguiente), 200);\n      return siguiente;\n    });\n  };\n\n  const iniciarReconocimiento = () => {\n    if (!recognitionRef.current) return;\n    try {\n      recognitionRef.current.abort();\n      recognitionRef.current.start();\n    } catch (error) {\n      console.error('Error iniciando reconocimiento:', error);\n      hablar('Hubo un error iniciando el micrófono.');\n    }\n  };\n\n  useEffect(() => {\n  pasoActualRef.current = pasoActual;\n}, [pasoActual]);\n\nconst formatearNombre = (texto) => {\n  return texto\n    .normalize('NFD')                // Elimina acentos\n    .replace(/[\\u0300-\\u036f]/g, '')\n    .toLowerCase()\n    .replace(/(^\\w{1})|(\\s+\\w{1})/g, letra => letra.toUpperCase()); // Capitaliza\n};\n\nconst manejarResultado = (resultado) => {\n  const paso = pasos[pasoActualRef.current];\n  let entrada = resultado\n  .replace(/[^\\w\\sáéíóúüñ]/gi, '') // elimina signos raros\n  .normalize('NFD').replace(/[\\u0300-\\u036f]/g, '') // quita acentos\n  .toLowerCase().trim(); // limpia espacios y deja todo en minúsculas\n  switch (paso) {\n    case 'nombre':\n    case 'apellido': {\n      const nombreFormateado = formatearNombre(resultado);\n      setFormData(prev => ({ ...prev, [paso]: nombreFormateado }));\n      avanzarPaso();\n      break;\n    }\n    case 'correo':\n      const correo = resultado.replace(' arroba ', '@').replace(/\\s/g, '');\n      setFormData(prev => ({ ...prev, correo }));\n      avanzarPaso();\n      break;\n\n    case 'password':\n      setFormData(prev => ({\n        ...prev,\n        password: resultado,\n        confirmPassword: resultado\n      }));\n      avanzarPaso();\n      break;\n\n    case 'discapacidad': {\n      const opcionesPorNumero = {\n        '1': 'cegueraTotal',\n        'uno': 'cegueraTotal',\n        'una': 'cegueraTotal', // por si interpreta así\n        'primero': 'cegueraTotal',\n        '2': 'bajaVision',\n        'dos': 'bajaVision',\n        'segundo': 'bajaVision',\n        '3': 'visionBorrosa',\n        'tres': 'visionBorrosa',\n        'tercero': 'visionBorrosa',\n        '3ro': 'visionBorrosa',\n        '4': 'fotofobia',\n        'cuatro': 'fotofobia',\n        'cuarto': 'fotofobia',\n        '5': 'otra',\n        'cinco': 'otra',\n        'quinto': 'otra'\n      };\n\n      const discapacidad = opcionesPorNumero[entrada];\n      if (discapacidad) {\n        setFormData(prev => ({ ...prev, discapacidad }));\n        avanzarPaso();\n      } else {\n        hablar('Opción no válida. Di un número del uno al cinco. Uno, ceguera total; dos, baja visión; tres, visión borrosa; cuatro, fotofobia; cinco, otra.');\n      }\n      break;\n    }\n    case 'descripcion':\n      if (['no', 'nada', 'ninguna'].includes(resultado)) {\n        avanzarPaso();\n      } else {\n        setFormData(prev => ({ ...prev, descripcion: resultado }));\n        avanzarPaso();\n      }\n      break;\n\n    default:\n      break;\n  }\n};\n  const manejarEnvioFormulario = async () => {\n    if (correoExistente) return hablar('Este correo ya está registrado.', () => iniciarPaso(2));\n    if (formData.password.length < 6) return hablar('La contraseña debe tener al menos 6 caracteres.', () => iniciarPaso(3));\n    if (formData.password !== formData.confirmPassword) return hablar('Las contraseñas no coinciden.', () => iniciarPaso(3));\n    if (!formData.discapacidad) return hablar('Debes seleccionar un tipo de discapacidad.', () => iniciarPaso(4));\n\n    try {\n      setCargando(true);\n      const res = await fetch('http://localhost:4000/api/RegistroDiscapacitados', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(formData)\n      });\n\n      if (res.ok) {\n        setMensajeEnviado(true);\n        hablar('¡Registro exitoso! Serás redirigido al inicio de sesión.', () => navigate('/login'), false);\n      } else {\n        const err = await res.json();\n        hablar(`Error al registrar: ${err.message || 'Intenta más tarde'}`);\n      }\n    } catch (err) {\n      console.error(err);\n      hablar('Ocurrió un error al conectar con el servidor. Intenta más tarde.');\n    } finally {\n      setCargando(false);\n    }\n  };\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({ ...prev, [name]: value }));\n  };\n\n  return (\n    <>\n      <BotonesModoOscuroVolver modoOscuro={modoOscuro} setModoOscuro={setModoOscuro} />\n\n      <div className=\"contenedor-microfono\">\n        <button\n          aria-label=\"Activar micrófono para dictar información\"\n          aria-describedby=\"instruccion-mic\"\n          onClick={iniciarReconocimiento}\n          disabled={cargando}\n          className={`boton-microfono ${reconocimientoActivo ? 'activo' : ''}`}>\n          <img\n            src={reconocimientoActivo\n              ? \"https://cdn-icons-png.flaticon.com/512/4712/4712035.png\"\n              : \"https://cdn-icons-png.flaticon.com/512/4712/4712109.png\"}\n            alt={reconocimientoActivo ? \"Micrófono activo\" : \"Micrófono inactivo\"}\n            className=\"icono-microfono\"\n            aria-hidden=\"true\"\n          />\n        </button>\n        <span id=\"instruccion-mic\" hidden>\n          Presiona este botón para activar el micrófono. Luego, sigue las instrucciones habladas.\n        </span>\n        {cargando && <div className=\"cargando-voz\">Procesando...</div>}\n      </div>\n\n      <div className=\"registro-container\">\n        <form onSubmit={e => e.preventDefault()}>\n          <h2>Formulario de Registro</h2>\n\n          <label htmlFor=\"nombre\">Nombre</label>\n          <input ref={nombreRef} type=\"text\" id=\"nombre\" name=\"nombre\" value={formData.nombre} onChange={handleChange} required />\n\n          <label htmlFor=\"apellido\">Apellido</label>\n          <input ref={apellidoRef} type=\"text\" id=\"apellido\" name=\"apellido\" value={formData.apellido} onChange={handleChange} required />\n\n          <label htmlFor=\"correo\">Correo electrónico:\n            {correoExistente && <span className=\"correo-registrado\"> * Este correo ya está registrado</span>}\n            {validandoCorreo && <span className=\"validando-correo\"> (Validando...)</span>}\n          </label>\n          <input ref={correoRef} type=\"email\" id=\"correo\" name=\"correo\" value={formData.correo} onChange={handleChange} required />\n\n          <label htmlFor=\"password\">Contraseña (mínimo 6 caracteres)</label>\n          <input ref={passwordRef} type=\"password\" id=\"password\" name=\"password\" value={formData.password} onChange={handleChange} required />\n\n          <label htmlFor=\"confirmPassword\">Confirmar contraseña</label>\n          <input ref={confirmPasswordRef} type=\"password\" id=\"confirmPassword\" name=\"confirmPassword\" value={formData.confirmPassword} onChange={handleChange} required />\n\n          <label htmlFor=\"discapacidad\">Tipo de discapacidad</label>\n          <select ref={discapacidadRef} id=\"discapacidad\" name=\"discapacidad\" value={formData.discapacidad} onChange={handleChange} required>\n            <option value=\"\">Seleccione un tipo de discapacidad visual</option>\n            <option value=\"cegueraTotal\">Ceguera total</option>\n            <option value=\"bajaVision\">Baja visión</option>\n            <option value=\"visionBorrosa\">Visión borrosa</option>\n            <option value=\"fotofobia\">Fotofobia</option>\n            <option value=\"otra\">Otra</option>\n          </select>\n\n          <label htmlFor=\"descripcion\">Descripción adicional (opcional)</label>\n          <textarea ref={descripcionRef} id=\"descripcion\" name=\"descripcion\" value={formData.descripcion} onChange={handleChange} rows=\"4\" />\n\n          <div className=\"botones-envio\">\n            <button type=\"button\" className=\"btn-enviar\" onClick={manejarEnvioFormulario} disabled={cargando}>\n              {cargando ? 'Procesando...' : 'Registrarse'}\n            </button>\n            <div className=\"texto-cuenta\">\n              ¿Ya tienes una cuenta?{' '}\n              <button type=\"button\" className=\"btn-iniciar-sesion\" onClick={() => navigate('/login')} disabled={cargando}>\n                Inicia sesión\n              </button>\n            </div>\n          </div>\n\n          {mensajeEnviado && <p className=\"mensaje-exito\">¡Registro exitoso!</p>}\n        </form>\n      </div>\n    </>\n  );\n}\n\nexport default FormularioDiscapacitados;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
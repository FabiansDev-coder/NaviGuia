{"ast":null,"code":"var _jsxFileName = \"E:\\\\Descargas\\\\Nueva carpeta\\\\Proyecto Desarrollo 1\\\\Frontend\\\\src\\\\formularios\\\\RegistroDiscapacitados.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport BotonesModoOscuroVolver from '../components/BotonesModoOscuroVolver';\nimport { verificarCorreo } from '../utils/verificarCorreo';\nimport '../styles/light.css';\nimport '../stylesdark/dark.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction FormularioDiscapacitados() {\n  _s();\n  const [formData, setFormData] = useState({\n    nombre: '',\n    apellido: '',\n    correo: '',\n    password: ''\n  });\n  const [errores, setErrores] = useState({\n    nombre: '',\n    apellido: '',\n    correo: '',\n    password: ''\n  });\n  const [modoOscuro, setModoOscuro] = useState(false);\n  const [correoExistente, setCorreoExistente] = useState(false);\n  const [validandoCorreo, setValidandoCorreo] = useState(false);\n  const [pasoActual, setPasoActual] = useState(0);\n  const [reconocimientoActivo, setReconocimientoActivo] = useState(false);\n  const [mensajeEnviado, setMensajeEnviado] = useState(false);\n  const [cargando, setCargando] = useState(false);\n  const [bloquearEventos, setBloquearEventos] = useState(false);\n  const recognitionRef = useRef(null);\n  const navigate = useNavigate();\n  const pasoActualRef = useRef(pasoActual);\n  const nombreRef = useRef(null);\n  const apellidoRef = useRef(null);\n  const correoRef = useRef(null);\n  const passwordRef = useRef(null);\n  const resultadoVozRef = useRef('');\n  const pasos = ['nombre', 'apellido', 'correo', 'password', 'registrar'];\n  const instrucciones = {\n    nombre: 'Gracias por preferir nuestra aplicacion, esperamos poder ayudarte al maximo. Para iniciar con el registro de tu cuenta. Por favor, indicanos tu nombre',\n    apellido: 'Ahora por favor, di tu apellido.',\n    correo: 'Ahora indica tu correo electrónico.',\n    password: 'Ahora indica tu contraseña. Debe tener al menos 6 caracteres.',\n    registrar: 'Registrando tu información.'\n  };\n  const referencias = {\n    nombre: nombreRef,\n    apellido: apellidoRef,\n    correo: correoRef,\n    password: passwordRef\n  };\n  const tiemposPorPaso = {\n    nombre: 5000,\n    apellido: 5000,\n    correo: 12000,\n    password: 8000\n  };\n\n  // Funciones de validación\n  const validarNombre = nombre => {\n    if (!nombre.trim()) return \"Este campo es requerido\";\n    if (!/^[a-zA-ZáéíóúÁÉÍÓÚñÑ\\s]+$/.test(nombre)) {\n      return \"Solo se permiten letras y espacios\";\n    }\n    return \"\";\n  };\n  const validarCorreo = correo => {\n    if (!correo) return \"Este campo es requerido\";\n    if (!correo.includes(\"@\")) return \"El correo debe contener @\";\n    if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]{2,}$/.test(correo)) {\n      return \"Formato inválido (ej: usuario@dominio.com)\";\n    }\n    return \"\";\n  };\n  const validarPassword = password => {\n    if (!password) return \"Este campo es requerido\";\n    if (/\\s/.test(password)) return \"No se permiten espacios\";\n    if (password.length < 6) return \"Mínimo 6 caracteres\";\n    return \"\";\n  };\n  const manejarValidaciones = (name, value) => {\n    let error = \"\";\n    switch (name) {\n      case \"nombre\":\n      case \"apellido\":\n        error = validarNombre(value);\n        break;\n      case \"correo\":\n        error = validarCorreo(value);\n        break;\n      case \"password\":\n        error = validarPassword(value);\n        break;\n      default:\n        break;\n    }\n    setErrores(prev => ({\n      ...prev,\n      [name]: error\n    }));\n  };\n  useEffect(() => {\n    document.body.classList.toggle('dark', modoOscuro);\n    if ('webkitSpeechRecognition' in window) {\n      const recognition = new window.webkitSpeechRecognition();\n      recognition.lang = 'es-ES';\n      recognition.continuous = false;\n      recognition.interimResults = false;\n      recognition.onresult = event => {\n        var _event$results, _event$results$, _event$results$$;\n        const resultado = (_event$results = event.results) === null || _event$results === void 0 ? void 0 : (_event$results$ = _event$results[0]) === null || _event$results$ === void 0 ? void 0 : (_event$results$$ = _event$results$[0]) === null || _event$results$$ === void 0 ? void 0 : _event$results$$.transcript.trim().toLowerCase();\n        resultadoVozRef.current = resultado;\n        if (resultado) {\n          manejarResultado(resultado);\n        }\n      };\n      recognition.onend = () => {\n        const resultado = resultadoVozRef.current;\n        if (!resultado) {\n          const paso = pasos[pasoActualRef.current];\n          const campo = paso === 'password' ? 'contraseña' : paso;\n          hablar(`No se escuchó. Por favor, dinos tu ${campo}.`);\n        } else {\n          resultadoVozRef.current = ''; // Limpieza\n        }\n      };\n      recognition.onerror = event => {\n        hablar('Tal vez no se te escuchó. Por favor, intentalo de nuevo.');\n        console.error('Reconocimiento error:', event.error);\n      };\n      recognitionRef.current = recognition;\n    }\n    setReconocimientoActivo(true);\n    iniciarPaso(0);\n    // eslint-disable-next-line\n  }, [modoOscuro]);\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      if (formData.correo) {\n        verificarCorreo(formData.correo, setCorreoExistente, setValidandoCorreo);\n      }\n    }, 500);\n    return () => clearTimeout(timer);\n  }, [formData.correo]);\n  useEffect(() => {\n    pasoActualRef.current = pasoActual;\n  }, [pasoActual]);\n  const hablar = (texto, callback = null, autoReconocer = true) => {\n    var _recognitionRef$curre;\n    setReconocimientoActivo(false);\n    setBloquearEventos(true);\n    (_recognitionRef$curre = recognitionRef.current) === null || _recognitionRef$curre === void 0 ? void 0 : _recognitionRef$curre.abort();\n    const msg = new SpeechSynthesisUtterance(texto);\n    msg.lang = 'es-ES';\n    msg.onend = () => {\n      setBloquearEventos(false);\n      if (callback) callback();\n      if (autoReconocer) {\n        setTimeout(() => iniciarReconocimiento(), 350);\n      }\n    };\n    window.speechSynthesis.cancel();\n    window.speechSynthesis.speak(msg);\n  };\n  const iniciarPaso = index => {\n    setPasoActual(index);\n    const paso = pasos[index];\n    const ref = referencias[paso];\n    if (ref !== null && ref !== void 0 && ref.current) ref.current.focus();\n    setTimeout(() => {\n      hablar(instrucciones[paso]);\n    }, 400);\n  };\n  const avanzarPaso = () => {\n    setPasoActual(prevPaso => {\n      const siguiente = Math.min(prevPaso + 1, pasos.length - 1);\n      if (pasos[siguiente] === 'registrar') {\n        var _recognitionRef$curre2;\n        setPasoActual(siguiente);\n        (_recognitionRef$curre2 = recognitionRef.current) === null || _recognitionRef$curre2 === void 0 ? void 0 : _recognitionRef$curre2.abort();\n        hablar(instrucciones.registrar, () => {\n          setTimeout(manejarEnvioFormulario, 1000);\n        }, false);\n      } else {\n        setTimeout(() => iniciarPaso(siguiente), 250);\n      }\n      return siguiente;\n    });\n  };\n  useEffect(() => {\n    if (formData.nombre && formData.apellido && formData.correo && formData.password.length >= 6 && !correoExistente && pasoActual === pasos.length - 1 && !mensajeEnviado) {\n      manejarEnvioFormulario();\n    }\n    // eslint-disable-next-line\n  }, [formData, correoExistente, pasoActual]);\n  const reproducirBeep = () => {\n    const context = new (window.AudioContext || window.webkitAudioContext)();\n    const o = context.createOscillator();\n    const g = context.createGain();\n    o.type = 'sine';\n    o.frequency.value = 1000;\n    o.connect(g);\n    g.connect(context.destination);\n    o.start();\n    g.gain.exponentialRampToValueAtTime(0.0001, context.currentTime + 0.1);\n    o.stop(context.currentTime + 0.1);\n  };\n  let timeoutReconocimiento;\n  const iniciarReconocimiento = () => {\n    if (!recognitionRef.current) return;\n    try {\n      recognitionRef.current.abort();\n      resultadoVozRef.current = '';\n      recognitionRef.current.start();\n      setReconocimientoActivo(true);\n      const paso = pasos[pasoActualRef.current];\n      const duracion = tiemposPorPaso[paso] || 7000;\n      clearTimeout(timeoutReconocimiento);\n      timeoutReconocimiento = setTimeout(() => {\n        var _recognitionRef$curre3;\n        (_recognitionRef$curre3 = recognitionRef.current) === null || _recognitionRef$curre3 === void 0 ? void 0 : _recognitionRef$curre3.stop();\n        setReconocimientoActivo(false);\n        reproducirBeep();\n      }, duracion);\n    } catch (error) {\n      console.error('Error iniciando reconocimiento:', error);\n      hablar('Hubo un error iniciando el micrófono.');\n    }\n  };\n  const formatearNombre = texto => {\n    return texto.normalize('NFD').replace(/[\\u0300-\\u036f]/g, '').replace(/[^a-zA-Z\\s]/g, '').replace(/\\s+/g, ' ').trim().toLowerCase().replace(/(^\\w{1})|(\\s+\\w{1})/g, l => l.toUpperCase());\n  };\n  const manejarResultado = resultado => {\n    const paso = pasos[pasoActualRef.current];\n    switch (paso) {\n      case 'nombre':\n      case 'apellido':\n        const valorLimpio = formatearNombre(resultado);\n        if (!valorLimpio) {\n          hablar(`El ${paso} no puede contener símbolos ni quedar vacío. Por favor, di tu ${paso} nuevamente.`, () => iniciarPaso(pasoActualRef.current));\n        } else {\n          setFormData(prev => ({\n            ...prev,\n            [paso]: valorLimpio\n          }));\n          manejarValidaciones(paso, valorLimpio);\n          avanzarPaso();\n        }\n        break;\n      case 'correo':\n        {\n          let correo = resultado.normalize('NFD').replace(/[\\u0300-\\u036f]/g, '').toLowerCase().replace(/\\s+/g, '').replace(/arroba/g, '@').replace(/punto/g, '.').replace(/guionbajo|guion bajo/g, '_').replace(/guion/g, '-');\n          const tieneArroba = correo.includes('@');\n          const tienePunto = correo.includes('.');\n          const terminaConDominio = /\\.(com|co|org|edu|net|gov|io|es)$/.test(correo);\n\n          // Primero validar el formato básico\n          if (!tieneArroba || !tienePunto || !terminaConDominio) {\n            setErrores(prev => ({\n              ...prev,\n              correo: \"Formato de correo inválido\"\n            }));\n            hablar('Ese correo no parece válido. Inténtalo de nuevo.', () => iniciarPaso(pasoActualRef.current));\n            return; // Salir temprano si el formato es inválido\n          }\n\n          // Solo si el formato es válido, verificar si existe\n          verificarCorreo(correo, existe => {\n            if (existe) {\n              setCorreoExistente(true);\n              setErrores(prev => ({\n                ...prev,\n                correo: \"Este correo ya está registrado\"\n              }));\n              hablar('Este correo ya está registrado. Por favor, di un correo diferente.', () => iniciarPaso(pasoActualRef.current));\n            } else {\n              setCorreoExistente(false);\n              setErrores(prev => ({\n                ...prev,\n                correo: \"\"\n              })); // Limpiar error si existe\n              setFormData(prev => ({\n                ...prev,\n                correo\n              }));\n              manejarValidaciones('correo', correo);\n              avanzarPaso();\n            }\n          }, setValidandoCorreo);\n          break;\n        }\n      case 'password':\n        {\n          const passwordSinEspacios = resultado.replace(/\\s+/g, '');\n          if (passwordSinEspacios.length < 6) {\n            setErrores(prev => ({\n              ...prev,\n              password: \"Mínimo 6 caracteres\"\n            }));\n            hablar('La contraseña debe tener al menos 6 caracteres y no debe contener espacios. Por favor, di tu contraseña nuevamente.', () => iniciarPaso(pasoActualRef.current));\n          } else {\n            setFormData(prev => ({\n              ...prev,\n              password: passwordSinEspacios\n            }));\n            manejarValidaciones('password', passwordSinEspacios);\n            avanzarPaso();\n          }\n          break;\n        }\n      default:\n        break;\n    }\n  };\n  const manejarEnvioFormulario = async () => {\n    // Verificar campos vacíos primero\n    const camposVacios = {\n      nombre: !formData.nombre.trim(),\n      apellido: !formData.apellido.trim(),\n      correo: !formData.correo.trim(),\n      password: !formData.password.trim()\n    };\n\n    // Si hay campos vacíos, establecer errores y hablar\n    if (Object.values(camposVacios).some(vacio => vacio)) {\n      const nuevosErrores = {\n        nombre: camposVacios.nombre ? \"Este campo es requerido\" : \"\",\n        apellido: camposVacios.apellido ? \"Este campo es requerido\" : \"\",\n        correo: camposVacios.correo ? \"Este campo es requerido\" : \"\",\n        password: camposVacios.password ? \"Este campo es requerido\" : \"\"\n      };\n      setErrores(nuevosErrores);\n\n      // Encontrar el primer campo vacío para enfocar\n      const primerCampoVacio = Object.keys(camposVacios).find(key => camposVacios[key]);\n      if (primerCampoVacio) {\n        const paso = pasos.findIndex(p => p === primerCampoVacio);\n        if (paso !== -1) {\n          hablar(`Por favor, completa el campo ${primerCampoVacio} antes de registrar.`, () => iniciarPaso(paso));\n        }\n      }\n      return;\n    }\n\n    // Luego validar el formato de los campos\n    const erroresActuales = {\n      nombre: validarNombre(formData.nombre),\n      apellido: validarNombre(formData.apellido),\n      correo: validarCorreo(formData.correo),\n      password: validarPassword(formData.password)\n    };\n    setErrores(erroresActuales);\n    const hayErrores = Object.values(erroresActuales).some(error => error !== \"\");\n    if (hayErrores || correoExistente) {\n      if (correoExistente) {\n        hablar('Este correo ya está registrado.', () => iniciarPaso(2));\n      }\n      return;\n    }\n    try {\n      setCargando(true);\n      const res = await fetch('http://localhost:4000/api/RegistroDiscapacitados', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(formData)\n      });\n      if (res.ok) {\n        setMensajeEnviado(true);\n        hablar('¡Registro exitoso! Serás redirigido al inicio de sesión.', () => navigate('/login'), false);\n      } else {\n        const err = await res.json();\n        hablar(`Error al registrar: ${err.message || 'Intenta más tarde'}`);\n      }\n    } catch (err) {\n      console.error(err);\n      hablar('Ocurrió un error al conectar con el servidor. Intenta más tarde.');\n    } finally {\n      setCargando(false);\n    }\n  };\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n    manejarValidaciones(name, value);\n  };\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n\n    // Solo permitir letras y espacios para nombre y apellido\n    if (name === 'nombre' || name === 'apellido') {\n      if (/^[a-zA-ZáéíóúÁÉÍÓÚñÑ\\s]*$/.test(value)) {\n        setFormData(prev => ({\n          ...prev,\n          [name]: value\n        }));\n        manejarValidaciones(name, value);\n      }\n    } else {\n      setFormData(prev => ({\n        ...prev,\n        [name]: value\n      }));\n      manejarValidaciones(name, value);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(BotonesModoOscuroVolver, {\n      modoOscuro: modoOscuro,\n      setModoOscuro: setModoOscuro,\n      bloquearEventos: bloquearEventos,\n      reconocimientoActivo: reconocimientoActivo\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 454,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"contenedor-microfono\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        \"aria-label\": \"Activar micr\\xF3fono para dictar informaci\\xF3n\",\n        \"aria-describedby\": \"instruccion-mic\",\n        onClick: iniciarReconocimiento,\n        disabled: cargando,\n        className: `boton-microfono ${reconocimientoActivo ? 'activo' : ''}`,\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: reconocimientoActivo ? \"https://cdn-icons-png.flaticon.com/512/4712/4712035.png\" : \"https://cdn-icons-png.flaticon.com/512/4712/4712109.png\",\n          alt: reconocimientoActivo ? \"Micrófono activo\" : \"Micrófono inactivo\",\n          className: \"icono-microfono\",\n          \"aria-hidden\": \"true\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 468,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 461,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        id: \"instruccion-mic\",\n        hidden: true,\n        children: \"Presiona este bot\\xF3n para activar el micr\\xF3fono. Luego, sigue las instrucciones habladas.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 477,\n        columnNumber: 9\n      }, this), cargando && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cargando-voz\",\n        children: \"Procesando...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 480,\n        columnNumber: 22\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 460,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"registro-container\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: e => e.preventDefault(),\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Formulario de Registro\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 485,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"nombre\",\n          children: [\"Nombre\", errores.nombre && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"error-campo\",\n            children: [\" * \", errores.nombre]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 489,\n            columnNumber: 32\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 487,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          ref: nombreRef,\n          type: \"text\",\n          id: \"nombre\",\n          name: \"nombre\",\n          value: formData.nombre,\n          onChange: handleInputChange,\n          onKeyDown: e => {\n            // Bloquear teclas numéricas y especiales\n            if (!/^[a-zA-ZáéíóúÁÉÍÓÚñÑ\\s]$/.test(e.key) && ![\"Backspace\", \"Delete\", \"ArrowLeft\", \"ArrowRight\", \"Tab\"].includes(e.key)) {\n              e.preventDefault();\n            }\n          },\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 491,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"apellido\",\n          children: [\"Apellido\", errores.apellido && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"error-campo\",\n            children: [\" * \", errores.apellido]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 510,\n            columnNumber: 34\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 508,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          ref: apellidoRef,\n          type: \"text\",\n          id: \"apellido\",\n          name: \"apellido\",\n          value: formData.apellido,\n          onChange: handleInputChange,\n          onKeyDown: e => {\n            // Bloquear teclas numéricas y especiales\n            if (!/^[a-zA-ZáéíóúÁÉÍÓÚñÑ\\s]$/.test(e.key) && ![\"Backspace\", \"Delete\", \"ArrowLeft\", \"ArrowRight\", \"Tab\"].includes(e.key)) {\n              e.preventDefault();\n            }\n          },\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 512,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"correo\",\n          children: [\"Correo electr\\xF3nico:\", errores.correo && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"error-campo\",\n            children: [\" * \", errores.correo]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 531,\n            columnNumber: 32\n          }, this), correoExistente && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"correo-registrado\",\n            children: \" * Este correo ya est\\xE1 registrado\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 532,\n            columnNumber: 33\n          }, this), validandoCorreo && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"validando-correo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 533,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 529,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          ref: correoRef,\n          type: \"email\",\n          id: \"correo\",\n          name: \"correo\",\n          value: formData.correo,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 535,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"password\",\n          children: [\"Contrase\\xF1a (m\\xEDnimo 6 caracteres)\", errores.password && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"error-campo\",\n            children: [\" * \", errores.password]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 547,\n            columnNumber: 34\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 545,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          ref: passwordRef,\n          type: \"password\",\n          id: \"password\",\n          name: \"password\",\n          value: formData.password,\n          onChange: handleChange,\n          onKeyDown: e => {\n            if (e.key === ' ') {\n              e.preventDefault();\n            }\n          },\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 549,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"botones-envio\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn-enviar\",\n            onClick: manejarEnvioFormulario,\n            children: cargando ? 'Procesando...' : 'Registrarse'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 565,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"texto-cuenta\",\n            children: [\"\\xBFYa tienes una cuenta?\", ' ', /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"btn-iniciar-sesion\",\n              onClick: () => navigate('/login'),\n              disabled: cargando,\n              children: \"Inicia sesi\\xF3n\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 574,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 572,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 564,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 484,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 483,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(FormularioDiscapacitados, \"5ZuJt4wsQKdoSn4FxRBTGvkqhys=\", false, function () {\n  return [useNavigate];\n});\n_c = FormularioDiscapacitados;\nexport default FormularioDiscapacitados;\nvar _c;\n$RefreshReg$(_c, \"FormularioDiscapacitados\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useNavigate","BotonesModoOscuroVolver","verificarCorreo","jsxDEV","_jsxDEV","Fragment","_Fragment","FormularioDiscapacitados","_s","formData","setFormData","nombre","apellido","correo","password","errores","setErrores","modoOscuro","setModoOscuro","correoExistente","setCorreoExistente","validandoCorreo","setValidandoCorreo","pasoActual","setPasoActual","reconocimientoActivo","setReconocimientoActivo","mensajeEnviado","setMensajeEnviado","cargando","setCargando","bloquearEventos","setBloquearEventos","recognitionRef","navigate","pasoActualRef","nombreRef","apellidoRef","correoRef","passwordRef","resultadoVozRef","pasos","instrucciones","registrar","referencias","tiemposPorPaso","validarNombre","trim","test","validarCorreo","includes","validarPassword","length","manejarValidaciones","name","value","error","prev","document","body","classList","toggle","window","recognition","webkitSpeechRecognition","lang","continuous","interimResults","onresult","event","_event$results","_event$results$","_event$results$$","resultado","results","transcript","toLowerCase","current","manejarResultado","onend","paso","campo","hablar","onerror","console","iniciarPaso","timer","setTimeout","clearTimeout","texto","callback","autoReconocer","_recognitionRef$curre","abort","msg","SpeechSynthesisUtterance","iniciarReconocimiento","speechSynthesis","cancel","speak","index","ref","focus","avanzarPaso","prevPaso","siguiente","Math","min","_recognitionRef$curre2","manejarEnvioFormulario","reproducirBeep","context","AudioContext","webkitAudioContext","o","createOscillator","g","createGain","type","frequency","connect","destination","start","gain","exponentialRampToValueAtTime","currentTime","stop","timeoutReconocimiento","duracion","_recognitionRef$curre3","formatearNombre","normalize","replace","l","toUpperCase","valorLimpio","tieneArroba","tienePunto","terminaConDominio","existe","passwordSinEspacios","camposVacios","Object","values","some","vacio","nuevosErrores","primerCampoVacio","keys","find","key","findIndex","p","erroresActuales","hayErrores","res","fetch","method","headers","JSON","stringify","ok","err","json","message","handleChange","e","target","handleInputChange","children","fileName","_jsxFileName","lineNumber","columnNumber","className","onClick","disabled","src","alt","id","hidden","onSubmit","preventDefault","htmlFor","onChange","onKeyDown","required","_c","$RefreshReg$"],"sources":["E:/Descargas/Nueva carpeta/Proyecto Desarrollo 1/Frontend/src/formularios/RegistroDiscapacitados.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef} from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport BotonesModoOscuroVolver from '../components/BotonesModoOscuroVolver';\nimport { verificarCorreo } from '../utils/verificarCorreo';\nimport '../styles/light.css';\nimport '../stylesdark/dark.css';\n\nfunction FormularioDiscapacitados() {\n  const [formData, setFormData] = useState({\n    nombre: '',\n    apellido: '',\n    correo: '',\n    password: ''\n  });\n\n  const [errores, setErrores] = useState({\n    nombre: '',\n    apellido: '',\n    correo: '',\n    password: ''\n  });\n\n  const [modoOscuro, setModoOscuro] = useState(false);\n  const [correoExistente, setCorreoExistente] = useState(false);\n  const [validandoCorreo, setValidandoCorreo] = useState(false);\n  const [pasoActual, setPasoActual] = useState(0);\n  const [reconocimientoActivo, setReconocimientoActivo] = useState(false);\n  const [mensajeEnviado, setMensajeEnviado] = useState(false);\n  const [cargando, setCargando] = useState(false);\n  const [bloquearEventos, setBloquearEventos] = useState(false);\n  const recognitionRef = useRef(null);\n  const navigate = useNavigate();\n\n  const pasoActualRef = useRef(pasoActual);\n  const nombreRef = useRef(null);\n  const apellidoRef = useRef(null);\n  const correoRef = useRef(null);\n  const passwordRef = useRef(null);\n  const resultadoVozRef = useRef('');\n\n  const pasos = ['nombre', 'apellido', 'correo', 'password', 'registrar'];\n\n  const instrucciones = {\n    nombre: 'Gracias por preferir nuestra aplicacion, esperamos poder ayudarte al maximo. Para iniciar con el registro de tu cuenta. Por favor, indicanos tu nombre',\n    apellido: 'Ahora por favor, di tu apellido.',\n    correo: 'Ahora indica tu correo electrónico.',\n    password: 'Ahora indica tu contraseña. Debe tener al menos 6 caracteres.',\n    registrar: 'Registrando tu información.'\n  };\n\n  const referencias = {\n    nombre: nombreRef,\n    apellido: apellidoRef,\n    correo: correoRef,\n    password: passwordRef\n  };\n\n  const tiemposPorPaso = {\n    nombre: 5000,\n    apellido: 5000,\n    correo: 12000,\n    password: 8000\n  };\n\n  // Funciones de validación\n  const validarNombre = (nombre) => {\n    if (!nombre.trim()) return \"Este campo es requerido\";\n    if (!/^[a-zA-ZáéíóúÁÉÍÓÚñÑ\\s]+$/.test(nombre)) {\n      return \"Solo se permiten letras y espacios\";\n    }\n    return \"\";\n  };\n\n  const validarCorreo = (correo) => {\n    if (!correo) return \"Este campo es requerido\";\n    if (!correo.includes(\"@\")) return \"El correo debe contener @\";\n    if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]{2,}$/.test(correo)) {\n      return \"Formato inválido (ej: usuario@dominio.com)\";\n    }\n    return \"\";\n  };\n\n  const validarPassword = (password) => {\n    if (!password) return \"Este campo es requerido\";\n    if (/\\s/.test(password)) return \"No se permiten espacios\";\n    if (password.length < 6) return \"Mínimo 6 caracteres\";\n    return \"\";\n  };\n\n  const manejarValidaciones = (name, value) => {\n    let error = \"\";\n    switch (name) {\n      case \"nombre\":\n      case \"apellido\":\n        error = validarNombre(value);\n        break;\n      case \"correo\":\n        error = validarCorreo(value);\n        break;\n      case \"password\":\n        error = validarPassword(value);\n        break;\n      default:\n        break;\n    }\n    setErrores(prev => ({ ...prev, [name]: error }));\n  };\n\n  useEffect(() => {\n    document.body.classList.toggle('dark', modoOscuro);\n\n    if ('webkitSpeechRecognition' in window) {\n      const recognition = new window.webkitSpeechRecognition();\n      recognition.lang = 'es-ES';\n      recognition.continuous = false;\n      recognition.interimResults = false;\n\n      recognition.onresult = (event) => {\n        const resultado = event.results?.[0]?.[0]?.transcript.trim().toLowerCase();\n        resultadoVozRef.current = resultado;\n        if (resultado) {\n          manejarResultado(resultado);\n        }\n      };\n\n      recognition.onend = () => {\n        const resultado = resultadoVozRef.current;\n        if (!resultado) {\n          const paso = pasos[pasoActualRef.current];\n          const campo = paso === 'password' ? 'contraseña' : paso;\n          hablar(`No se escuchó. Por favor, dinos tu ${campo}.`);\n        } else {\n          resultadoVozRef.current = ''; // Limpieza\n        }\n      };\n\n      recognition.onerror = (event) => {\n        hablar('Tal vez no se te escuchó. Por favor, intentalo de nuevo.');\n        console.error('Reconocimiento error:', event.error);\n      };\n\n      recognitionRef.current = recognition;\n    }\n\n    setReconocimientoActivo(true);\n    iniciarPaso(0);\n    // eslint-disable-next-line\n  }, [modoOscuro]);\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      if (formData.correo) {\n        verificarCorreo(formData.correo, setCorreoExistente, setValidandoCorreo);\n      }\n    }, 500);\n    return () => clearTimeout(timer);\n  }, [formData.correo]);\n\n  useEffect(() => {\n    pasoActualRef.current = pasoActual;\n  }, [pasoActual]);\n\n  const hablar = (texto, callback = null, autoReconocer = true) => {\n    setReconocimientoActivo(false);\n    setBloquearEventos(true); \n\n    recognitionRef.current?.abort();\n\n    const msg = new SpeechSynthesisUtterance(texto);\n    msg.lang = 'es-ES';\n    msg.onend = () => {\n      setBloquearEventos(false); \n      if (callback) callback();\n      if (autoReconocer) {\n        setTimeout(() => iniciarReconocimiento(), 350);\n      }\n    };\n\n    window.speechSynthesis.cancel();\n    window.speechSynthesis.speak(msg);\n  };\n\n  const iniciarPaso = (index) => {\n    setPasoActual(index);\n    const paso = pasos[index];\n    const ref = referencias[paso];\n    if (ref?.current) ref.current.focus();\n\n    setTimeout(() => {\n      hablar(instrucciones[paso]);\n    }, 400);\n  };\n\n  const avanzarPaso = () => {\n    setPasoActual(prevPaso => {\n      const siguiente = Math.min(prevPaso + 1, pasos.length - 1);\n\n      if (pasos[siguiente] === 'registrar') {\n        setPasoActual(siguiente);\n        recognitionRef.current?.abort();\n        hablar(instrucciones.registrar, () => {\n          setTimeout(manejarEnvioFormulario, 1000);\n        }, false);\n      } else {\n        setTimeout(() => iniciarPaso(siguiente), 250);\n      }\n\n      return siguiente;\n    });\n  };\n\n  useEffect(() => {\n    if (\n      formData.nombre &&\n      formData.apellido &&\n      formData.correo &&\n      formData.password.length >= 6 &&\n      !correoExistente &&\n      pasoActual === pasos.length - 1 &&\n      !mensajeEnviado\n    ) {\n      manejarEnvioFormulario();\n    }\n    // eslint-disable-next-line\n  }, [formData, correoExistente, pasoActual]);\n\n  const reproducirBeep = () => {\n    const context = new (window.AudioContext || window.webkitAudioContext)();\n    const o = context.createOscillator();\n    const g = context.createGain();\n\n    o.type = 'sine';\n    o.frequency.value = 1000;\n\n    o.connect(g);\n    g.connect(context.destination);\n\n    o.start();\n    g.gain.exponentialRampToValueAtTime(0.0001, context.currentTime + 0.1);\n\n    o.stop(context.currentTime + 0.1);\n  };\n\n  let timeoutReconocimiento;\n\n  const iniciarReconocimiento = () => {\n    if (!recognitionRef.current) return;\n    try {\n      recognitionRef.current.abort();\n      resultadoVozRef.current = '';\n      recognitionRef.current.start();\n      setReconocimientoActivo(true);\n\n      const paso = pasos[pasoActualRef.current];\n      const duracion = tiemposPorPaso[paso] || 7000;\n\n      clearTimeout(timeoutReconocimiento);\n      timeoutReconocimiento = setTimeout(() => {\n        recognitionRef.current?.stop();\n        setReconocimientoActivo(false);\n        reproducirBeep();\n      }, duracion);\n\n    } catch (error) {\n      console.error('Error iniciando reconocimiento:', error);\n      hablar('Hubo un error iniciando el micrófono.');\n    }\n  };\n\n  const formatearNombre = (texto) => {\n    return texto\n      .normalize('NFD')\n      .replace(/[\\u0300-\\u036f]/g, '')\n      .replace(/[^a-zA-Z\\s]/g, '')\n      .replace(/\\s+/g, ' ')\n      .trim()\n      .toLowerCase()\n      .replace(/(^\\w{1})|(\\s+\\w{1})/g, l => l.toUpperCase());\n  };\n\n  const manejarResultado = (resultado) => {\n    const paso = pasos[pasoActualRef.current];\n    switch (paso) {\n      case 'nombre':\n      case 'apellido':\n        const valorLimpio = formatearNombre(resultado);\n        if (!valorLimpio) {\n          hablar(`El ${paso} no puede contener símbolos ni quedar vacío. Por favor, di tu ${paso} nuevamente.`, () => iniciarPaso(pasoActualRef.current));\n        } else {\n          setFormData(prev => ({ ...prev, [paso]: valorLimpio }));\n          manejarValidaciones(paso, valorLimpio);\n          avanzarPaso();\n        }\n        break;\n\n      case 'correo': {\n      let correo = resultado\n        .normalize('NFD').replace(/[\\u0300-\\u036f]/g, '')\n        .toLowerCase()\n        .replace(/\\s+/g, '')\n        .replace(/arroba/g, '@')\n        .replace(/punto/g, '.')\n        .replace(/guionbajo|guion bajo/g, '_')\n        .replace(/guion/g, '-');\n\n      const tieneArroba = correo.includes('@');\n      const tienePunto = correo.includes('.');\n      const terminaConDominio = /\\.(com|co|org|edu|net|gov|io|es)$/.test(correo);\n\n      // Primero validar el formato básico\n      if (!tieneArroba || !tienePunto || !terminaConDominio) {\n        setErrores(prev => ({ ...prev, correo: \"Formato de correo inválido\" }));\n        hablar('Ese correo no parece válido. Inténtalo de nuevo.', () => iniciarPaso(pasoActualRef.current));\n        return; // Salir temprano si el formato es inválido\n      }\n\n      // Solo si el formato es válido, verificar si existe\n      verificarCorreo(correo, (existe) => {\n        if (existe) {\n          setCorreoExistente(true);\n          setErrores(prev => ({ ...prev, correo: \"Este correo ya está registrado\" }));\n          hablar('Este correo ya está registrado. Por favor, di un correo diferente.', () => iniciarPaso(pasoActualRef.current));\n        } else {\n          setCorreoExistente(false);\n          setErrores(prev => ({ ...prev, correo: \"\" })); // Limpiar error si existe\n          setFormData(prev => ({ ...prev, correo }));\n          manejarValidaciones('correo', correo);\n          avanzarPaso();\n        }\n      }, setValidandoCorreo);\n      break;\n    }\n\n      case 'password': {\n        const passwordSinEspacios = resultado.replace(/\\s+/g, '');\n\n        if (passwordSinEspacios.length < 6) {\n          setErrores(prev => ({ ...prev, password: \"Mínimo 6 caracteres\" }));\n          hablar(\n            'La contraseña debe tener al menos 6 caracteres y no debe contener espacios. Por favor, di tu contraseña nuevamente.',\n            () => iniciarPaso(pasoActualRef.current)\n          );\n        } else {\n          setFormData(prev => ({\n            ...prev,\n            password: passwordSinEspacios,\n          }));\n          manejarValidaciones('password', passwordSinEspacios);\n          avanzarPaso();\n        }\n        break;\n      }\n      default:\n        break;\n    }\n  };\n\n  const manejarEnvioFormulario = async () => {\n  // Verificar campos vacíos primero\n  const camposVacios = {\n    nombre: !formData.nombre.trim(),\n    apellido: !formData.apellido.trim(),\n    correo: !formData.correo.trim(),\n    password: !formData.password.trim()\n  };\n\n  // Si hay campos vacíos, establecer errores y hablar\n  if (Object.values(camposVacios).some(vacio => vacio)) {\n    const nuevosErrores = {\n      nombre: camposVacios.nombre ? \"Este campo es requerido\" : \"\",\n      apellido: camposVacios.apellido ? \"Este campo es requerido\" : \"\",\n      correo: camposVacios.correo ? \"Este campo es requerido\" : \"\",\n      password: camposVacios.password ? \"Este campo es requerido\" : \"\"\n    };\n    setErrores(nuevosErrores);\n\n    // Encontrar el primer campo vacío para enfocar\n    const primerCampoVacio = Object.keys(camposVacios).find(key => camposVacios[key]);\n    if (primerCampoVacio) {\n      const paso = pasos.findIndex(p => p === primerCampoVacio);\n      if (paso !== -1) {\n        hablar(`Por favor, completa el campo ${primerCampoVacio} antes de registrar.`, () => iniciarPaso(paso));\n      }\n    }\n    return;\n  }\n\n  // Luego validar el formato de los campos\n  const erroresActuales = {\n    nombre: validarNombre(formData.nombre),\n    apellido: validarNombre(formData.apellido),\n    correo: validarCorreo(formData.correo),\n    password: validarPassword(formData.password)\n  };\n\n  setErrores(erroresActuales);\n\n  const hayErrores = Object.values(erroresActuales).some(error => error !== \"\");\n  if (hayErrores || correoExistente) {\n    if (correoExistente) {\n      hablar('Este correo ya está registrado.', () => iniciarPaso(2));\n    }\n    return;\n  }\n\n  try {\n    setCargando(true);\n    const res = await fetch('http://localhost:4000/api/RegistroDiscapacitados', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(formData)\n    });\n\n    if (res.ok) {\n      setMensajeEnviado(true);\n      hablar('¡Registro exitoso! Serás redirigido al inicio de sesión.', () => navigate('/login'), false);\n    } else {\n      const err = await res.json();\n      hablar(`Error al registrar: ${err.message || 'Intenta más tarde'}`);\n    }\n  } catch (err) {\n    console.error(err);\n    hablar('Ocurrió un error al conectar con el servidor. Intenta más tarde.');\n  } finally {\n    setCargando(false);\n  }\n};\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({ ...prev, [name]: value }));\n    manejarValidaciones(name, value);\n  };\n\n\n\n   const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    \n    // Solo permitir letras y espacios para nombre y apellido\n    if (name === 'nombre' || name === 'apellido') {\n      if (/^[a-zA-ZáéíóúÁÉÍÓÚñÑ\\s]*$/.test(value)) {\n        setFormData(prev => ({ ...prev, [name]: value }));\n        manejarValidaciones(name, value);\n      }\n    } else {\n      setFormData(prev => ({ ...prev, [name]: value }));\n      manejarValidaciones(name, value);\n    }\n  };\n\n  return (\n    <>\n      <BotonesModoOscuroVolver \n        modoOscuro={modoOscuro} \n        setModoOscuro={setModoOscuro} \n        bloquearEventos={bloquearEventos} \n        reconocimientoActivo={reconocimientoActivo}\n      />\n      <div className=\"contenedor-microfono\">\n        <button \n          aria-label=\"Activar micrófono para dictar información\" \n          aria-describedby=\"instruccion-mic\"  \n          onClick={iniciarReconocimiento} \n          disabled={cargando} \n          className={`boton-microfono ${reconocimientoActivo ? 'activo' : ''}`}\n        >\n          <img\n            src={reconocimientoActivo\n              ? \"https://cdn-icons-png.flaticon.com/512/4712/4712035.png\"\n              : \"https://cdn-icons-png.flaticon.com/512/4712/4712109.png\"}\n            alt={reconocimientoActivo ? \"Micrófono activo\" : \"Micrófono inactivo\"}\n            className=\"icono-microfono\"\n            aria-hidden=\"true\"\n          />\n        </button>\n        <span id=\"instruccion-mic\" hidden>\n          Presiona este botón para activar el micrófono. Luego, sigue las instrucciones habladas.\n        </span>\n        {cargando && <div className=\"cargando-voz\">Procesando...</div>}\n      </div>\n\n      <div className=\"registro-container\">\n        <form onSubmit={e => e.preventDefault()}>\n          <h2>Formulario de Registro</h2>\n\n          <label htmlFor=\"nombre\">\n            Nombre\n            {errores.nombre && <span className=\"error-campo\"> * {errores.nombre}</span>}\n          </label>\n          <input \n            ref={nombreRef} \n            type=\"text\" \n            id=\"nombre\" \n            name=\"nombre\"  \n            value={formData.nombre}  \n            onChange={handleInputChange}\n            onKeyDown={(e) => {\n              // Bloquear teclas numéricas y especiales\n              if (!/^[a-zA-ZáéíóúÁÉÍÓÚñÑ\\s]$/.test(e.key) && \n                  ![\"Backspace\", \"Delete\", \"ArrowLeft\", \"ArrowRight\", \"Tab\"].includes(e.key)) {\n                e.preventDefault();\n              }\n            }}\n            required\n          />\n\n          <label htmlFor=\"apellido\">\n            Apellido\n            {errores.apellido && <span className=\"error-campo\"> * {errores.apellido}</span>}\n          </label>\n          <input \n            ref={apellidoRef} \n            type=\"text\" \n            id=\"apellido\" \n            name=\"apellido\" \n            value={formData.apellido}\n            onChange={handleInputChange}\n            onKeyDown={(e) => {\n              // Bloquear teclas numéricas y especiales\n              if (!/^[a-zA-ZáéíóúÁÉÍÓÚñÑ\\s]$/.test(e.key) && \n                  ![\"Backspace\", \"Delete\", \"ArrowLeft\", \"ArrowRight\", \"Tab\"].includes(e.key)) {\n                e.preventDefault();\n              }\n            }}\n            required\n          />\n\n          <label htmlFor=\"correo\">\n            Correo electrónico:\n            {errores.correo && <span className=\"error-campo\"> * {errores.correo}</span>}\n            {correoExistente && <span className=\"correo-registrado\"> * Este correo ya está registrado</span>}\n            {validandoCorreo && <span className=\"validando-correo\"></span>}\n          </label>\n          <input \n            ref={correoRef} \n            type=\"email\" \n            id=\"correo\" \n            name=\"correo\" \n            value={formData.correo} \n            onChange={handleChange} \n            required \n          />\n\n          <label htmlFor=\"password\">\n            Contraseña (mínimo 6 caracteres)\n            {errores.password && <span className=\"error-campo\"> * {errores.password}</span>}\n          </label>\n          <input\n            ref={passwordRef}\n            type=\"password\"\n            id=\"password\"\n            name=\"password\"\n            value={formData.password}\n            onChange={handleChange}\n            onKeyDown={(e) => {\n              if (e.key === ' ') {\n                e.preventDefault();\n              }\n            }}\n            required\n          />\n\n          <div className=\"botones-envio\">\n            <button \n              type=\"button\" \n              className=\"btn-enviar\" \n              onClick={manejarEnvioFormulario} \n            >\n              {cargando ? 'Procesando...' : 'Registrarse'}\n            </button>\n            <div className=\"texto-cuenta\">\n              ¿Ya tienes una cuenta?{' '}\n              <button \n                type=\"button\" \n                className=\"btn-iniciar-sesion\" \n                onClick={() => navigate('/login')} \n                disabled={cargando}\n              >\n                Inicia sesión\n              </button>\n            </div>\n          </div>\n        </form>\n      </div>\n    </>\n  );\n}\n\nexport default FormularioDiscapacitados;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
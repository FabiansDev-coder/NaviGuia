{"ast":null,"code":"var _jsxFileName = \"E:\\\\Descargas\\\\Nueva carpeta\\\\Proyecto Desarrollo 1 - copia\\\\Frontend\\\\src\\\\formularios\\\\RegistroDiscapacitados.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport BotonesModoOscuroVolver from '../components/BotonesModoOscuroVolver';\nimport { verificarCorreo } from '../utils/verificarCorreo';\nimport '../styles/light.css';\nimport '../styles/dark.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction FormularioDiscapacitados() {\n  _s();\n  const [formData, setFormData] = useState({\n    nombre: '',\n    apellido: '',\n    correo: '',\n    password: ''\n  });\n  const [modoOscuro, setModoOscuro] = useState(false);\n  const [correoExistente, setCorreoExistente] = useState(false);\n  const [validandoCorreo, setValidandoCorreo] = useState(false);\n  const [pasoActual, setPasoActual] = useState(0);\n  const [reconocimientoActivo, setReconocimientoActivo] = useState(false);\n  const [mensajeEnviado, setMensajeEnviado] = useState(false);\n  const [cargando, setCargando] = useState(false);\n  const recognitionRef = useRef(null);\n  const navigate = useNavigate();\n  const pasoActualRef = useRef(pasoActual);\n  const nombreRef = useRef(null);\n  const apellidoRef = useRef(null);\n  const correoRef = useRef(null);\n  const passwordRef = useRef(null);\n  const resultadoVozRef = useRef('');\n  const pasos = ['nombre', 'apellido', 'correo', 'password', 'registrar'];\n  const instrucciones = {\n    nombre: 'Este es el formulario de registro para discapacitados visuales. Por favor, di tu nombre.',\n    apellido: 'Ahora por favor, di tu apellido.',\n    correo: 'Ahora indica tu correo electr칩nico.',\n    password: 'Ahora indica tu contrase침a. Debe tener al menos 6 caracteres.',\n    registrar: 'Registrando tu informaci칩n.'\n  };\n  const referencias = {\n    nombre: nombreRef,\n    apellido: apellidoRef,\n    correo: correoRef,\n    password: passwordRef\n  };\n  const tiemposPorPaso = {\n    nombre: 5000,\n    apellido: 5000,\n    correo: 12000,\n    password: 8000\n  };\n  useEffect(() => {\n    document.body.classList.toggle('dark', modoOscuro);\n    if ('webkitSpeechRecognition' in window) {\n      const recognition = new window.webkitSpeechRecognition();\n      recognition.lang = 'es-ES';\n      recognition.continuous = false;\n      recognition.interimResults = false;\n      recognition.onresult = event => {\n        var _event$results, _event$results$, _event$results$$;\n        const resultado = (_event$results = event.results) === null || _event$results === void 0 ? void 0 : (_event$results$ = _event$results[0]) === null || _event$results$ === void 0 ? void 0 : (_event$results$$ = _event$results$[0]) === null || _event$results$$ === void 0 ? void 0 : _event$results$$.transcript.trim().toLowerCase();\n        resultadoVozRef.current = resultado;\n        if (resultado) {\n          manejarResultado(resultado);\n        }\n      };\n      recognition.onend = () => {\n        const resultado = resultadoVozRef.current;\n        if (!resultado) {\n          const paso = pasos[pasoActualRef.current];\n          const campo = paso === 'password' ? 'contrase침a' : paso;\n          hablar(`No se escuch칩. Por favor, dinos tu ${campo}.`);\n        } else {\n          resultadoVozRef.current = ''; // Limpieza\n        }\n      };\n      recognition.onerror = event => {\n        hablar('Tal vez no se te escucho o tu mensaje no es valido. Por favor intentalo de nuevo.');\n        console.error('Reconocimiento error:', event.error);\n      };\n      recognitionRef.current = recognition;\n    }\n    setReconocimientoActivo(true);\n    iniciarPaso(0);\n    // eslint-disable-next-line\n  }, [modoOscuro]);\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      if (formData.correo) {\n        verificarCorreo(formData.correo, setCorreoExistente, setValidandoCorreo);\n      }\n    }, 500);\n    return () => clearTimeout(timer);\n  }, [formData.correo]);\n  useEffect(() => {\n    pasoActualRef.current = pasoActual;\n  }, [pasoActual]);\n  useEffect(() => {\n    const todosCamposLlenos = formData.nombre && formData.apellido && formData.correo && formData.password.length >= 6 && !correoExistente && !validandoCorreo;\n    if (todosCamposLlenos && pasoActual === pasos.length - 2) {\n      avanzarPaso(); // Lanza el paso \"registrar\"\n    } // eslint-disable-next-line\n  }, [formData, correoExistente, validandoCorreo, pasoActual]);\n  const hablar = (texto, callback = null, autoReconocer = true) => {\n    var _recognitionRef$curre;\n    setReconocimientoActivo(false);\n    (_recognitionRef$curre = recognitionRef.current) === null || _recognitionRef$curre === void 0 ? void 0 : _recognitionRef$curre.abort();\n    const msg = new SpeechSynthesisUtterance(texto);\n    msg.lang = 'es-ES';\n    msg.onend = () => {\n      if (callback) callback();\n      if (autoReconocer) {\n        setTimeout(() => iniciarReconocimiento(), 350);\n      }\n    };\n    window.speechSynthesis.cancel();\n    window.speechSynthesis.speak(msg);\n  };\n  const iniciarPaso = index => {\n    setPasoActual(index);\n    const paso = pasos[index];\n    const ref = referencias[paso];\n    if (ref !== null && ref !== void 0 && ref.current) ref.current.focus();\n    setTimeout(() => {\n      hablar(instrucciones[paso]);\n    }, 400);\n  };\n  const avanzarPaso = () => {\n    setPasoActual(prevPaso => {\n      const siguiente = Math.min(prevPaso + 1, pasos.length - 1);\n      if (pasos[siguiente] === 'registrar') {\n        var _recognitionRef$curre2;\n        setPasoActual(siguiente);\n        (_recognitionRef$curre2 = recognitionRef.current) === null || _recognitionRef$curre2 === void 0 ? void 0 : _recognitionRef$curre2.abort(); // 游댏 Cancela reconocimiento para evitar ruido extra\n        hablar(instrucciones.registrar, manejarEnvioFormulario, false);\n      } else {\n        setTimeout(() => iniciarPaso(siguiente), 250);\n      }\n      return siguiente;\n    });\n  };\n  const reproducirBeep = () => {\n    const context = new (window.AudioContext || window.webkitAudioContext)();\n    const o = context.createOscillator();\n    const g = context.createGain();\n    o.type = 'sine';\n    o.frequency.value = 1000;\n    o.connect(g);\n    g.connect(context.destination);\n    o.start();\n    g.gain.exponentialRampToValueAtTime(0.0001, context.currentTime + 0.1);\n    o.stop(context.currentTime + 0.1); // Detiene correctamente\n  };\n  let timeoutReconocimiento;\n  const iniciarReconocimiento = () => {\n    if (!recognitionRef.current) return;\n    try {\n      recognitionRef.current.abort();\n      resultadoVozRef.current = '';\n      recognitionRef.current.start();\n      setReconocimientoActivo(true);\n      const paso = pasos[pasoActualRef.current];\n      const duracion = tiemposPorPaso[paso] || 7000;\n      clearTimeout(timeoutReconocimiento);\n      timeoutReconocimiento = setTimeout(() => {\n        var _recognitionRef$curre3;\n        (_recognitionRef$curre3 = recognitionRef.current) === null || _recognitionRef$curre3 === void 0 ? void 0 : _recognitionRef$curre3.stop();\n        setReconocimientoActivo(false);\n        reproducirBeep();\n      }, duracion);\n    } catch (error) {\n      console.error('Error iniciando reconocimiento:', error);\n      hablar('Hubo un error iniciando el micr칩fono.');\n    }\n  };\n  const formatearNombre = texto => {\n    return texto.normalize('NFD').replace(/[\\u0300-\\u036f]/g, '').toLowerCase().replace(/(^\\w{1})|(\\s+\\w{1})/g, letra => letra.toUpperCase());\n  };\n  const manejarResultado = resultado => {\n    const paso = pasos[pasoActualRef.current];\n    switch (paso) {\n      case 'nombre':\n      case 'apellido':\n        setFormData(prev => ({\n          ...prev,\n          [paso]: formatearNombre(resultado)\n        }));\n        avanzarPaso();\n        break;\n      case 'correo':\n        {\n          let correo = resultado.normalize('NFD').replace(/[\\u0300-\\u036f]/g, '').toLowerCase().replace(/\\s+/g, '').replace(/arroba/g, '@').replace(/punto/g, '.').replace(/guionbajo|guion bajo/g, '_').replace(/guion/g, '-');\n          const tieneArroba = correo.includes('@');\n          const tienePunto = correo.includes('.');\n          const terminaConDominio = /\\.(com|co|org|edu|net|gov|io|es)$/.test(correo);\n          if (tieneArroba && tienePunto && terminaConDominio) {\n            verificarCorreo(correo, existe => {\n              if (existe) {\n                setCorreoExistente(true);\n                hablar('Este correo ya est치 registrado. Por favor, di un correo diferente.', () => iniciarPaso(pasoActualRef.current));\n              } else {\n                setCorreoExistente(false);\n                setFormData(prev => ({\n                  ...prev,\n                  correo\n                }));\n                avanzarPaso();\n              }\n            }, setValidandoCorreo);\n          } else {\n            hablar('Ese correo no parece v치lido. Int칠ntalo de nuevo.', () => iniciarPaso(pasoActualRef.current));\n          }\n          break;\n        }\n      case 'password':\n        if (resultado.length < 6) {\n          hablar('La contrase침a debe tener al menos 6 caracteres. Por favor, di tu contrase침a nuevamente.', () => iniciarPaso(pasoActualRef.current));\n        } else {\n          setFormData(prev => ({\n            ...prev,\n            password: resultado\n          }));\n          avanzarPaso();\n        }\n        break;\n      default:\n        break;\n    }\n  };\n  const manejarEnvioFormulario = async () => {\n    if (correoExistente) return hablar('Este correo ya est치 registrado.', () => iniciarPaso(2));\n    if (formData.password.length < 6) return hablar('La contrase침a debe tener al menos 6 caracteres.', () => iniciarPaso(3));\n    try {\n      setCargando(true);\n      const res = await fetch('http://localhost:4000/api/RegistroDiscapacitados', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(formData)\n      });\n      if (res.ok) {\n        setMensajeEnviado(true);\n        hablar('춰Registro exitoso! Ser치s redirigido al inicio de sesi칩n.', () => navigate('/login'), false);\n      } else {\n        const err = await res.json();\n        hablar(`Error al registrar: ${err.message || 'Intenta m치s tarde'}`);\n      }\n    } catch (err) {\n      console.error(err);\n      hablar('Ocurri칩 un error al conectar con el servidor. Intenta m치s tarde.');\n    } finally {\n      setCargando(false);\n    }\n  };\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(BotonesModoOscuroVolver, {\n      modoOscuro: modoOscuro,\n      setModoOscuro: setModoOscuro\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"contenedor-microfono\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        \"aria-label\": \"Activar micr\\xF3fono para dictar informaci\\xF3n\",\n        \"aria-describedby\": \"instruccion-mic\",\n        onClick: iniciarReconocimiento,\n        disabled: cargando,\n        className: `boton-microfono ${reconocimientoActivo ? 'activo' : ''}`,\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: reconocimientoActivo ? \"https://cdn-icons-png.flaticon.com/512/4712/4712035.png\" : \"https://cdn-icons-png.flaticon.com/512/4712/4712109.png\",\n          alt: reconocimientoActivo ? \"Micr칩fono activo\" : \"Micr칩fono inactivo\",\n          className: \"icono-microfono\",\n          \"aria-hidden\": \"true\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        id: \"instruccion-mic\",\n        hidden: true,\n        children: \"Presiona este bot\\xF3n para activar el micr\\xF3fono. Luego, sigue las instrucciones habladas.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 9\n      }, this), cargando && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cargando-voz\",\n        children: \"Procesando...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 22\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"registro-container\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: e => e.preventDefault(),\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Formulario de Registro\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"nombre\",\n          children: \"Nombre\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          ref: nombreRef,\n          type: \"text\",\n          id: \"nombre\",\n          name: \"nombre\",\n          value: formData.nombre,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"apellido\",\n          children: \"Apellido\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          ref: apellidoRef,\n          type: \"text\",\n          id: \"apellido\",\n          name: \"apellido\",\n          value: formData.apellido,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"correo\",\n          children: [\"Correo electr\\xF3nico:\", correoExistente && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"correo-registrado\",\n            children: \" * Este correo ya est\\xE1 registrado\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 33\n          }, this), validandoCorreo && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"validando-correo\",\n            children: \" (Validando...)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          ref: correoRef,\n          type: \"email\",\n          id: \"correo\",\n          name: \"correo\",\n          value: formData.correo,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"password\",\n          children: \"Contrase\\xF1a (m\\xEDnimo 6 caracteres)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          ref: passwordRef,\n          type: \"password\",\n          id: \"password\",\n          name: \"password\",\n          value: formData.password,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"botones-envio\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn-enviar\",\n            onClick: manejarEnvioFormulario,\n            disabled: cargando,\n            children: cargando ? 'Procesando...' : 'Registrarse'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 355,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"texto-cuenta\",\n            children: [\"\\xBFYa tienes una cuenta?\", ' ', /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"btn-iniciar-sesion\",\n              onClick: () => navigate('/login'),\n              disabled: cargando,\n              children: \"Inicia sesi\\xF3n\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 360,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 358,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 11\n        }, this), mensajeEnviado && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mensaje-exito\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 30\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(FormularioDiscapacitados, \"DIcaFfsRQ3Cx/ysTVcQuTJAQ1EI=\", false, function () {\n  return [useNavigate];\n});\n_c = FormularioDiscapacitados;\nexport default FormularioDiscapacitados;\nvar _c;\n$RefreshReg$(_c, \"FormularioDiscapacitados\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useNavigate","BotonesModoOscuroVolver","verificarCorreo","jsxDEV","_jsxDEV","Fragment","_Fragment","FormularioDiscapacitados","_s","formData","setFormData","nombre","apellido","correo","password","modoOscuro","setModoOscuro","correoExistente","setCorreoExistente","validandoCorreo","setValidandoCorreo","pasoActual","setPasoActual","reconocimientoActivo","setReconocimientoActivo","mensajeEnviado","setMensajeEnviado","cargando","setCargando","recognitionRef","navigate","pasoActualRef","nombreRef","apellidoRef","correoRef","passwordRef","resultadoVozRef","pasos","instrucciones","registrar","referencias","tiemposPorPaso","document","body","classList","toggle","window","recognition","webkitSpeechRecognition","lang","continuous","interimResults","onresult","event","_event$results","_event$results$","_event$results$$","resultado","results","transcript","trim","toLowerCase","current","manejarResultado","onend","paso","campo","hablar","onerror","console","error","iniciarPaso","timer","setTimeout","clearTimeout","todosCamposLlenos","length","avanzarPaso","texto","callback","autoReconocer","_recognitionRef$curre","abort","msg","SpeechSynthesisUtterance","iniciarReconocimiento","speechSynthesis","cancel","speak","index","ref","focus","prevPaso","siguiente","Math","min","_recognitionRef$curre2","manejarEnvioFormulario","reproducirBeep","context","AudioContext","webkitAudioContext","o","createOscillator","g","createGain","type","frequency","value","connect","destination","start","gain","exponentialRampToValueAtTime","currentTime","stop","timeoutReconocimiento","duracion","_recognitionRef$curre3","formatearNombre","normalize","replace","letra","toUpperCase","prev","tieneArroba","includes","tienePunto","terminaConDominio","test","existe","res","fetch","method","headers","JSON","stringify","ok","err","json","message","handleChange","e","name","target","children","fileName","_jsxFileName","lineNumber","columnNumber","className","onClick","disabled","src","alt","id","hidden","onSubmit","preventDefault","htmlFor","onChange","required","_c","$RefreshReg$"],"sources":["E:/Descargas/Nueva carpeta/Proyecto Desarrollo 1 - copia/Frontend/src/formularios/RegistroDiscapacitados.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport BotonesModoOscuroVolver from '../components/BotonesModoOscuroVolver';\nimport { verificarCorreo } from '../utils/verificarCorreo';\nimport '../styles/light.css';\nimport '../styles/dark.css';\n\nfunction FormularioDiscapacitados() {\n  const [formData, setFormData] = useState({\n    nombre: '',\n    apellido: '',\n    correo: '',\n    password: ''\n  });\n\n  const [modoOscuro, setModoOscuro] = useState(false);\n  const [correoExistente, setCorreoExistente] = useState(false);\n  const [validandoCorreo, setValidandoCorreo] = useState(false);\n  const [pasoActual, setPasoActual] = useState(0);\n  const [reconocimientoActivo, setReconocimientoActivo] = useState(false);\n  const [mensajeEnviado, setMensajeEnviado] = useState(false);\n  const [cargando, setCargando] = useState(false);\n  const recognitionRef = useRef(null);\n  const navigate = useNavigate();\n\n  const pasoActualRef = useRef(pasoActual);\n  const nombreRef = useRef(null);\n  const apellidoRef = useRef(null);\n  const correoRef = useRef(null);\n  const passwordRef = useRef(null);\n  const resultadoVozRef = useRef('');\n\n  const pasos = ['nombre', 'apellido', 'correo', 'password', 'registrar'];\n\n  const instrucciones = {\n    nombre: 'Este es el formulario de registro para discapacitados visuales. Por favor, di tu nombre.',\n    apellido: 'Ahora por favor, di tu apellido.',\n    correo: 'Ahora indica tu correo electr칩nico.',\n    password: 'Ahora indica tu contrase침a. Debe tener al menos 6 caracteres.',\n    registrar: 'Registrando tu informaci칩n.'\n  };\n\n  const referencias = {\n    nombre: nombreRef,\n    apellido: apellidoRef,\n    correo: correoRef,\n    password: passwordRef\n  };\n\n  const tiemposPorPaso = {\n    nombre: 5000,\n    apellido: 5000,\n    correo: 12000,\n    password: 8000\n  };\n\n  useEffect(() => {\n    document.body.classList.toggle('dark', modoOscuro);\n\n    if ('webkitSpeechRecognition' in window) {\n      const recognition = new window.webkitSpeechRecognition();\n      recognition.lang = 'es-ES';\n      recognition.continuous = false;\n      recognition.interimResults = false;\n\n      recognition.onresult = (event) => {\n        const resultado = event.results?.[0]?.[0]?.transcript.trim().toLowerCase();\n        resultadoVozRef.current = resultado;\n        if (resultado) {\n          manejarResultado(resultado);\n        }\n      };\n\n      recognition.onend = () => {\n        const resultado = resultadoVozRef.current;\n        if (!resultado) {\n          const paso = pasos[pasoActualRef.current];\n          const campo = paso === 'password' ? 'contrase침a' : paso;\n          hablar(`No se escuch칩. Por favor, dinos tu ${campo}.`);\n        } else {\n          resultadoVozRef.current = ''; // Limpieza\n        }\n      };\n\n      recognition.onerror = (event) => {\n        hablar('Tal vez no se te escucho o tu mensaje no es valido. Por favor intentalo de nuevo.');\n        console.error('Reconocimiento error:', event.error);\n      };\n\n      recognitionRef.current = recognition;\n    }\n\n    setReconocimientoActivo(true);\n    iniciarPaso(0);\n    // eslint-disable-next-line\n  }, [modoOscuro]);\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      if (formData.correo) {\n        verificarCorreo(formData.correo, setCorreoExistente, setValidandoCorreo);\n      }\n    }, 500);\n    return () => clearTimeout(timer);\n  }, [formData.correo]);\n\n  useEffect(() => {\n    pasoActualRef.current = pasoActual;\n  }, [pasoActual]);\n\n   useEffect(() => {\n    const todosCamposLlenos = \n      formData.nombre && \n      formData.apellido && \n      formData.correo && \n      formData.password.length >= 6 &&\n      !correoExistente &&\n      !validandoCorreo;\n\n    if (todosCamposLlenos && pasoActual === pasos.length - 2) {\n      avanzarPaso(); // Lanza el paso \"registrar\"\n    } // eslint-disable-next-line\n  }, [formData, correoExistente, validandoCorreo, pasoActual]);\n\n  const hablar = (texto, callback = null, autoReconocer = true) => {\n    setReconocimientoActivo(false);\n    recognitionRef.current?.abort();\n\n    const msg = new SpeechSynthesisUtterance(texto);\n    msg.lang = 'es-ES';\n    msg.onend = () => {\n      if (callback) callback();\n      if (autoReconocer) {\n        setTimeout(() => iniciarReconocimiento(), 350);\n      }\n    };\n\n    window.speechSynthesis.cancel();\n    window.speechSynthesis.speak(msg);\n  };\n\n  const iniciarPaso = (index) => {\n    setPasoActual(index);\n    const paso = pasos[index];\n    const ref = referencias[paso];\n    if (ref?.current) ref.current.focus();\n\n    setTimeout(() => {\n      hablar(instrucciones[paso]);\n    }, 400);\n  };\n\n  const avanzarPaso = () => {\n    setPasoActual(prevPaso => {\n      const siguiente = Math.min(prevPaso + 1, pasos.length - 1);\n\n      if (pasos[siguiente] === 'registrar') {\n        setPasoActual(siguiente);\n        recognitionRef.current?.abort(); // 游댏 Cancela reconocimiento para evitar ruido extra\n        hablar(instrucciones.registrar, manejarEnvioFormulario, false);\n      } else {\n        setTimeout(() => iniciarPaso(siguiente), 250);\n      }\n\n      return siguiente;\n    });\n  };\n\n  const reproducirBeep = () => {\n    const context = new (window.AudioContext || window.webkitAudioContext)();\n    const o = context.createOscillator();\n    const g = context.createGain();\n\n    o.type = 'sine';\n    o.frequency.value = 1000;\n\n    o.connect(g);\n    g.connect(context.destination);\n\n    o.start();\n    g.gain.exponentialRampToValueAtTime(0.0001, context.currentTime + 0.1);\n\n    o.stop(context.currentTime + 0.1); // Detiene correctamente\n  };\n\n  let timeoutReconocimiento;\n\n  const iniciarReconocimiento = () => {\n    if (!recognitionRef.current) return;\n    try {\n      recognitionRef.current.abort();\n      resultadoVozRef.current = '';\n      recognitionRef.current.start();\n      setReconocimientoActivo(true);\n\n      const paso = pasos[pasoActualRef.current];\n      const duracion = tiemposPorPaso[paso] || 7000;\n\n      clearTimeout(timeoutReconocimiento);\n      timeoutReconocimiento = setTimeout(() => {\n        recognitionRef.current?.stop();\n        setReconocimientoActivo(false);\n        reproducirBeep();\n      }, duracion);\n\n    } catch (error) {\n      console.error('Error iniciando reconocimiento:', error);\n      hablar('Hubo un error iniciando el micr칩fono.');\n    }\n  };\n\n  const formatearNombre = (texto) => {\n    return texto\n      .normalize('NFD')\n      .replace(/[\\u0300-\\u036f]/g, '')\n      .toLowerCase()\n      .replace(/(^\\w{1})|(\\s+\\w{1})/g, letra => letra.toUpperCase());\n  };\n\n  const manejarResultado = (resultado) => {\n    const paso = pasos[pasoActualRef.current];\n    switch (paso) {\n      case 'nombre':\n      case 'apellido':\n        setFormData(prev => ({ ...prev, [paso]: formatearNombre(resultado) }));\n        avanzarPaso();\n        break;\n\n      case 'correo': {\n        let correo = resultado\n          .normalize('NFD').replace(/[\\u0300-\\u036f]/g, '')\n          .toLowerCase()\n          .replace(/\\s+/g, '')\n          .replace(/arroba/g, '@')\n          .replace(/punto/g, '.')\n          .replace(/guionbajo|guion bajo/g, '_')\n          .replace(/guion/g, '-');\n\n        const tieneArroba = correo.includes('@');\n        const tienePunto = correo.includes('.');\n        const terminaConDominio = /\\.(com|co|org|edu|net|gov|io|es)$/.test(correo);\n\n        if (tieneArroba && tienePunto && terminaConDominio) {\n          verificarCorreo(correo, (existe) => {\n            if (existe) {\n              setCorreoExistente(true);\n              hablar('Este correo ya est치 registrado. Por favor, di un correo diferente.', () => iniciarPaso(pasoActualRef.current));\n            } else {\n              setCorreoExistente(false);\n              setFormData(prev => ({ ...prev, correo }));\n              avanzarPaso();\n            }\n          }, setValidandoCorreo);\n        } else {\n          hablar('Ese correo no parece v치lido. Int칠ntalo de nuevo.', () => iniciarPaso(pasoActualRef.current));\n        }\n        break;\n      }\n\n      case 'password':\n        if (resultado.length < 6) {\n          hablar('La contrase침a debe tener al menos 6 caracteres. Por favor, di tu contrase침a nuevamente.', () => iniciarPaso(pasoActualRef.current));\n        } else {\n          setFormData(prev => ({\n            ...prev,\n            password: resultado,\n          }));\n          avanzarPaso();\n        }\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  const manejarEnvioFormulario = async () => {\n    if (correoExistente) return hablar('Este correo ya est치 registrado.', () => iniciarPaso(2));\n    if (formData.password.length < 6) return hablar('La contrase침a debe tener al menos 6 caracteres.', () => iniciarPaso(3));\n\n    try {\n      setCargando(true);\n      const res = await fetch('http://localhost:4000/api/RegistroDiscapacitados', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(formData)\n      });\n\n      if (res.ok) {\n        setMensajeEnviado(true);\n        hablar('춰Registro exitoso! Ser치s redirigido al inicio de sesi칩n.', () => navigate('/login'), false);\n      } else {\n        const err = await res.json();\n        hablar(`Error al registrar: ${err.message || 'Intenta m치s tarde'}`);\n      }\n    } catch (err) {\n      console.error(err);\n      hablar('Ocurri칩 un error al conectar con el servidor. Intenta m치s tarde.');\n    } finally {\n      setCargando(false);\n    }\n  };\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({ ...prev, [name]: value }));\n  };\n\n  return (\n    <>\n      <BotonesModoOscuroVolver modoOscuro={modoOscuro} setModoOscuro={setModoOscuro} />\n\n      <div className=\"contenedor-microfono\">\n        <button\n          aria-label=\"Activar micr칩fono para dictar informaci칩n\"\n          aria-describedby=\"instruccion-mic\"\n          onClick={iniciarReconocimiento}\n          disabled={cargando}\n          className={`boton-microfono ${reconocimientoActivo ? 'activo' : ''}`}>\n          <img\n            src={reconocimientoActivo\n              ? \"https://cdn-icons-png.flaticon.com/512/4712/4712035.png\"\n              : \"https://cdn-icons-png.flaticon.com/512/4712/4712109.png\"}\n            alt={reconocimientoActivo ? \"Micr칩fono activo\" : \"Micr칩fono inactivo\"}\n            className=\"icono-microfono\"\n            aria-hidden=\"true\"\n          />\n        </button>\n        <span id=\"instruccion-mic\" hidden>\n          Presiona este bot칩n para activar el micr칩fono. Luego, sigue las instrucciones habladas.\n        </span>\n        {cargando && <div className=\"cargando-voz\">Procesando...</div>}\n      </div>\n\n      <div className=\"registro-container\">\n        <form onSubmit={e => e.preventDefault()}>\n          <h2>Formulario de Registro</h2>\n\n          <label htmlFor=\"nombre\">Nombre</label>\n          <input ref={nombreRef} type=\"text\" id=\"nombre\" name=\"nombre\" value={formData.nombre} onChange={handleChange} required />\n\n          <label htmlFor=\"apellido\">Apellido</label>\n          <input ref={apellidoRef} type=\"text\" id=\"apellido\" name=\"apellido\" value={formData.apellido} onChange={handleChange} required />\n\n          <label htmlFor=\"correo\">Correo electr칩nico:\n            {correoExistente && <span className=\"correo-registrado\"> * Este correo ya est치 registrado</span>}\n            {validandoCorreo && <span className=\"validando-correo\"> (Validando...)</span>}\n          </label>\n          <input ref={correoRef} type=\"email\" id=\"correo\" name=\"correo\" value={formData.correo} onChange={handleChange} required />\n\n          <label htmlFor=\"password\">Contrase침a (m칤nimo 6 caracteres)</label>\n          <input ref={passwordRef} type=\"password\" id=\"password\" name=\"password\" value={formData.password} onChange={handleChange} required />\n\n          <div className=\"botones-envio\">\n            <button type=\"button\" className=\"btn-enviar\" onClick={manejarEnvioFormulario} disabled={cargando}>\n              {cargando ? 'Procesando...' : 'Registrarse'}\n            </button>\n            <div className=\"texto-cuenta\">\n              쯏a tienes una cuenta?{' '}\n              <button type=\"button\" className=\"btn-iniciar-sesion\" onClick={() => navigate('/login')} disabled={cargando}>\n                Inicia sesi칩n\n              </button>\n            </div>\n          </div>\n          {mensajeEnviado && <p className=\"mensaje-exito\"></p>}\n        </form>\n      </div>\n    </>\n  );\n}\n\nexport default FormularioDiscapacitados;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}